[package]
name = "mofa-foundation"
version.workspace = true
edition.workspace = true
description = "MoFA Foundation - Core building blocks and utilities"
license = "MIT OR Apache-2.0"
repository = "https://github.com/mofa-org/mofa"
homepage = "https://github.com/mofa-org/mofa"
documentation = "https://docs.rs/mofa-foundation"

[features]
default = ["openai"]
# Enable OpenAI provider (uses async-openai)
openai = ["dep:async-openai"]
# Enable Kokoro TTS engine support
kokoro = ["mofa-plugins/kokoro"]
# Enable PostgreSQL persistence backend
persistence-postgres = ["dep:sqlx"]
# Enable MySQL/MariaDB persistence backend
persistence-mysql = ["dep:sqlx"]
# Enable SQLite persistence backend
persistence-sqlite = ["dep:sqlx"]
# Enable all database backends
persistence-all = ["persistence-postgres", "persistence-mysql", "persistence-sqlite"]

[dependencies]
# Workspace dependencies
async-trait.workspace = true
serde.workspace = true
serde_json.workspace = true
uuid.workspace = true
thiserror.workspace = true
tokio.workspace = true
futures.workspace = true
anyhow.workspace = true
tokio-stream = { workspace = true }
tracing.workspace = true
# YAML config parsing
serde_yaml = "0.9"

# Regex for prompt template parsing
regex = "1.11"

# OpenAI support (optional, enabled by default)
async-openai = { version = "0.27", optional = true }

# Actor framework for ReAct agents
ractor.workspace = true

# Datetime support for persistence
chrono.workspace = true

# Database support (optional)
sqlx = { version = "0.8", features = ["runtime-tokio", "postgres", "mysql", "sqlite", "uuid", "chrono", "json"], optional = true }

# Local dependencies
mofa-kernel = { path = "../mofa-kernel" }
mofa-extra = { path = "../mofa-extra" }
mofa-plugins = { path = "../mofa-plugins" }
once_cell = "1.21.3"
rhai = { version = "1", features = ["sync", "serde"] }
lazy_static = "1.4"

