<!--
同步影响报告
==================
版本变更: N/A → 1.0.0 (初次批准)
修改的原则: N/A (初始版本)
新增章节:
  - 核心原则 (6 项原则)
  - 开发标准
  - 质量与测试
  - 治理
删除章节: N/A
需要更新的模板:
  - .specify/templates/plan-template.md ✅ (宪法检查部分兼容)
  - .specify/templates/spec-template.md ✅ (需求部分对齐)
  - .specify/templates/tasks-template.md ✅ (阶段结构兼容)
后续待办: 无
-->

# MoFA 宪法

## 核心原则

### 一、可组合的 AI 架构

所有功能必须构建为遵循 Unix 哲学的可组合、可堆叠的Agent。

- 每个Agent必须是自包含的，具有清晰的输入和输出
- Agent必须可独立部署和测试
- 复杂行为必须通过组合更简单的Agent来实现
- Agent接口必须使用标准数据流模式（而非复杂工作流）

**理由**: Unix 的"只做一件事并做好"哲学实现了灵活的组合并减少了耦合。
构建块方法使 AI 开发民主化。

### 二、数据流优先

所有Agent间通信必须使用显式数据流模式。

- 数据流必须以声明式方式定义（首选 YAML）
- 消息传递必须使用标准格式（JSON 保证稳定性，Arrow 保证性能）
- 数据流必须可可视化和可调试
- 避免节点之间的隐藏状态或隐式依赖

**理由**: 显式数据流比命令式工作流更易于理解、调试和修改。
可视化表示降低了理解门槛。

### 三、一切皆Agent

MoFA 生态系统中的所有组件必须被视为Agent。

- LLM、脚本、API 和工具都是Agent
- 无论实现方式如何，Agent必须暴露一致的接口
- 新的Agent类型必须通过标准节点接口集成
- 框架本身在适用的地方也遵循Agent模式

**理由**: 统一处理实现了通用可组合性，并减少了组合不同组件类型时的认知负担。

### 四、可访问性与简洁性

MoFA 在所有设计决策中必须优先考虑可访问性和简洁性。

- Python 优先的接口以实现最大可访问性
- 配置必须人类可读（YAML 优于编程方式）
- 文档必须为每个功能包含可运行的示例
- CLI 必须提供有帮助的错误消息和指导
- 避免不必要的抽象；三行相似的代码胜过过早的抽象

**理由**: "赋能每个人做非凡的事"——AI 开发不应该仅限于专家。
简洁性降低了入门门槛。

### 五、模块化与可扩展设计

所有框架组件必须支持无需修改即可扩展。

- 节点实现必须通过标准接口可插拔
- 模板系统必须支持无需分叉即可自定义
- 依赖必须显式声明（无隐式要求）
- 高性能路径（Rust 节点）必须保持可选

**理由**: 可扩展性使社区贡献和特定领域定制成为可能，同时保持核心稳定性。

### 六、平台务实主义

MoFA 必须优先考虑实用的跨平台支持，而非理论上的纯粹性。

- Python 3.10+ 必须是主要支持的运行时
- Linux、macOS 和 WSL2 必须得到完全支持
- 实验性功能必须明确标注
- 破坏性变更必须遵循语义版本控制
- 性能优化不得破坏标准 Python 工作流

**理由**: 实用的平台支持确保 MoFA 在开发者工作的地方可以工作。
清晰的状态标签防止用户对实验性功能感到沮丧。

## 开发标准

所有对 MoFA 的贡献必须遵守这些标准。

- 代码必须通过代码检查（使用仓库中配置的工具）
- 新功能必须包含文档更新
- Agent模板必须包含可运行的示例
- CLI 命令必须提供带有清晰描述的 `--help`
- 配置文件必须包含解释选项的内联注释

## 质量与测试

测试要求随变更范围而扩展。

- Bug 修复在可行时必须包含回归测试
- 新Agent必须包含可运行的数据流示例
- 契约变更必须更新所有受影响的示例
- 集成测试应覆盖Agent组合场景
- 性能关键路径应包含基准测试

## 治理

本宪法优先于 MoFA 项目的所有其他开发实践。

**修订程序**:
1. 提议的修订必须附有理由文档
2. 修订必须经过维护者审查
3. 破坏性修订（删除/重新定义原则）需要主版本号升级
4. 澄清和添加需要次版本号或补丁版本号升级

**版本控制策略**:
- 主版本: 向后不兼容的原则变更
- 次版本: 新原则或重要指导添加
- 补丁版本: 澄清、拼写修正、非语义性改进

**合规审查**:
- 所有 PR 应根据适用原则进行审查
- 超出这些原则的复杂性必须明确说明理由
- 参考项目文档获取运行时开发指导

**版本**: 1.0.0 | **批准日期**: 2026-01-09 | **最后修订**: 2026-01-09
